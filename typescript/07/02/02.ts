const fs = require('fs');
const createAmp = require('./intCode');

let highestOutput = Number.MIN_SAFE_INTEGER;
let highestSignal = '';

const numbers = [3,8,1001,8,10,8,105,1,0,0,21,38,63,80,105,118,199,280,361,442,99999,3,9,102,5,9,9,1001,9,3,9,1002,9,2,9,4,9,99,3,9,1001,9,4,9,102,4,9,9,101,4,9,9,102,2,9,9,101,2,9,9,4,9,99,3,9,1001,9,5,9,102,4,9,9,1001,9,4,9,4,9,99,3,9,101,3,9,9,1002,9,5,9,101,3,9,9,102,5,9,9,101,3,9,9,4,9,99,3,9,1002,9,2,9,1001,9,4,9,4,9,99,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,101,2,9,9,4,9,3,9,1001,9,1,9,4,9,99,3,9,102,2,9,9,4,9,3,9,1001,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,1002,9,2,9,4,9,3,9,101,1,9,9,4,9,99,3,9,101,1,9,9,4,9,3,9,102,2,9,9,4,9,3,9,101,1,9,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,101,2,9,9,4,9,99,3,9,1002,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,102,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,102,2,9,9,4,9,3,9,102,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,1001,9,1,9,4,9,99,3,9,1001,9,2,9,4,9,3,9,1001,9,2,9,4,9,3,9,101,1,9,9,4,9,3,9,101,2,9,9,4,9,3,9,1002,9,2,9,4,9,3,9,102,2,9,9,4,9,3,9,1001,9,1,9,4,9,3,9,1002,9,2,9,4,9,3,9,1001,9,1,9,4,9,3,9,101,1,9,9,4,9,99];

for (let p1 = 5; p1 < 10; p1 += 1) {
  for (let p2 = 5; p2 < 10; p2 += 1) {
    if (p1 === p2) {
      continue;
    }
    for (let p3 = 5; p3 < 10; p3 += 1) {
      if (p1 === p3 || p2 === p3) {
        continue;
      }
      for (let p4 = 5; p4 < 10; p4 += 1) {
        if (p1 === p4 || p2 === p4 || p3 === p4) {
          continue;
        }
        for (let p5 = 5; p5 < 10; p5 += 1) {
          if (p1 === p5 || p2 === p5 || p3 === p5 || p4 === p5) {
            continue;
          }

          doRun(p1, p2, p3, p4, p5);
        }
      }
    }
  }
}

function doRun(...p: Number[]) {
  let lastOutput = 0;
  const amps = [];
  for (let amp = 0; amp < 5; amp += 1) {
    amps.push(createAmp(p[amp], [...numbers]));
  }

  let ampIndex = 0;
  let lastFinished = false;

  while (true) {
    const output = amps[ampIndex](lastOutput, [...numbers]);

    if (output != null) {
      lastOutput = output;
      lastFinished = false;
    } else {
      break;
    }

    ampIndex += 1;
    ampIndex = ampIndex % 5;
  }

  if (lastOutput > highestOutput) {
    highestSignal = `${p[0]}${p[1]}${p[2]}${p[3]}${p[4]}`;
    highestOutput = lastOutput
  }
}

// doRun(9, 8, 7, 6, 5);
console.log(highestOutput, highestSignal);






